<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://ui-avatars.com/api/?name=L&background=1a73e8&color=fff&size=512">
    <title>LOKA PRO</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #1a73e8; --bg: #000; --card: #1c1c1e; --accent: #ffd700; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: -apple-system, sans-serif; background: var(--bg); color: white; overflow: hidden; height: 100vh; }
        
        .screen { position: absolute; inset: 0; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); background: var(--bg); display: flex; flex-direction: column; z-index: 10; }
        .hidden { transform: translateX(100%); opacity: 0; z-index: 1; }
        
        /* Header */
        .header { padding: env(safe-area-inset-top) 20px 20px; text-align: center; background: linear-gradient(to bottom, #1a73e833, transparent); }
        .logo { font-size: 32px; font-weight: 900; letter-spacing: -1px; }
        .logo span { color: var(--primary); }

        /* Auth Screen */
        .auth-box { padding: 30px; margin-top: auto; background: var(--card); border-top-left-radius: 30px; border-top-right-radius: 30px; }
        input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #333; background: #2c2c2e; color: white; margin-bottom: 15px; font-size: 16px; text-align: center; }
        .btn { width: 100%; padding: 16px; border-radius: 12px; border: none; font-weight: bold; font-size: 16px; cursor: pointer; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); margin-top: 10px; }

        /* Main Menu */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 20px; flex: 1; overflow-y: auto; }
        .service-card { background: var(--card); border-radius: 20px; padding: 20px; text-align: center; border: 1px solid #2c2c2e; position: relative; }
        .service-card i { font-size: 30px; display: block; margin-bottom: 10px; }
        .badge { position: absolute; top: 10px; right: 10px; background: #34c759; font-size: 10px; padding: 2px 6px; border-radius: 5px; }

        /* Map & Booking */
        #map { flex: 1; width: 100%; }
        .booking-panel { background: var(--card); padding: 20px; padding-bottom: calc(20px + env(safe-area-inset-bottom)); border-top: 1px solid #333; }
        .deposit-notice { background: #ffd7001a; border: 1px dashed var(--accent); color: var(--accent); padding: 12px; border-radius: 10px; font-size: 13px; margin-bottom: 15px; }

        /* Captain Dashboard */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; }
        .stat-card { background: #2c2c2e; padding: 15px; border-radius: 15px; text-align: center; }
        .stat-val { display: block; font-size: 20px; font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

    <div id="screen-auth" class="screen">
        <div class="header">
            <div class="logo">LOKA <span>PRO</span></div>
            <p>Ù…Ù†ØµØ© Ø§Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©</p>
        </div>
        <div style="padding: 20px; text-align: center; color: #888;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ.. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø¨Ø¯Ø¡</div>
        <div class="auth-box">
            <input type="tel" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (05xxxxxxx)">
            <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©">
            <button class="btn btn-primary" onclick="showScreen('screen-home')">Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø¨ÙˆÙ†</button>
            <button class="btn btn-outline" onclick="showScreen('screen-captain')">Ø¯Ø®ÙˆÙ„ ÙƒÙƒØ§Ø¨ØªÙ† (Ø´Ø±ÙŠÙƒ)</button>
        </div>
    </div>

    <div id="screen-home" class="screen hidden">
        <div class="header">
            <div class="logo">LOKA <span>PRO</span></div>
        </div>
        <div class="menu-grid">
            <div class="service-card" onclick="openMap('Ø³Ø·Ø­Ø©')"><i>ğŸï¸</i>Ø³Ø·Ø­Ø© Ø³Ø±ÙŠØ¹Ø©</div>
            <div class="service-card" onclick="openMap('Ù…ÙŠØ§Ù‡')"><i>ğŸ’§</i>ÙˆØ§ÙŠØª Ù…ÙŠØ§Ù‡</div>
            <div class="service-card" onclick="openMap('Ø¹ÙØ´')"><i>ğŸ“¦</i>Ù†Ù‚Ù„ Ø¹ÙØ´</div>
            <div class="service-card" onclick="openMap('ÙŠÙˆÙ…ÙŠØ§Øª')"><span class="badge">Ø¬Ø¯ÙŠØ¯</span><i>ğŸª</i>Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</div>
        </div>
    </div>

    <div id="screen-map" class="screen hidden">
        <div id="map"></div>
        <div class="booking-panel">
            <div id="service-info" style="font-weight: bold; margin-bottom: 5px;">Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©: Ø³Ø·Ø­Ø©</div>
            <div class="deposit-notice">
                âš ï¸ ÙŠØªØ·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø±Ø¨ÙˆÙ† Ø¨Ù‚ÙŠÙ…Ø© <b>15 Ø±ÙŠØ§Ù„</b> (Ù…Ø³ØªØ±Ø¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ù‚Ø¨Ù„ ØªØ­Ø±Ùƒ Ø§Ù„ÙƒØ§Ø¨ØªÙ†ØŒ ÙˆÙ…Ø­Ø³ÙˆÙ…Ø© Ù„Ù„ÙƒØ§Ø¨ØªÙ† ÙÙŠ Ø­Ø§Ù„ ÙˆØµÙˆÙ„Ù‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹).
            </div>
            <button class="btn btn-primary" onclick="confirmOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¯ÙØ¹ Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†</button>
            <button class="btn btn-outline" style="border-color: #ff3b30; color: #ff3b30;" onclick="showScreen('screen-home')">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <div id="screen-captain" class="screen hidden">
        <div class="header">
            <div class="logo">LOKA <span>PRO</span> <small style="font-size: 12px; color: #34c759;">ÙƒØ§Ø¨ØªÙ†</small></div>
        </div>
        <div class="stat-grid">
            <div class="stat-card"><span class="stat-val">4.9 â­</span>ØªÙ‚ÙŠÙŠÙ…Ùƒ</div>
            <div class="stat-card"><span class="stat-val">120</span>Ø·Ù„Ø¨Ø§Øª Ù…Ù‚Ø¨ÙˆÙ„Ø©</div>
            <div class="stat-card"><span class="stat-val">3</span>Ù…Ø±ÙÙˆØ¶ (Ø³Ø¹Ø±)</div>
            <div class="stat-card"><span class="stat-val">250 SR</span>Ø¹Ø±Ø¨ÙˆÙ†Ø§Øª Ù…Ø­ØµÙ„Ø©</div>
        </div>
        <div style="padding: 20px;">
            <div style="background: #1c1c1e; padding: 20px; border-radius: 20px; border-left: 4px solid #34c759;">
                <h4 style="margin: 0;">Ø£Ù†Øª Ø§Ù„Ø¢Ù†: Ù…ØªØµÙ„</h4>
                <p style="font-size: 12px; color: #888;">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø£Ù‚Ø±Ø¨ Ø·Ù„Ø¨ Ù…Ù†Ùƒ ÙÙŠ Ø¬Ø§Ø²Ø§Ù†...</p>
            </div>
        </div>
        <button class="btn btn-outline" onclick="showScreen('screen-auth')" style="margin: 20px; width: auto;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        let map;
        function openMap(type) {
            showScreen('screen-map');
            document.getElementById('service-info').innerText = "Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©: " + type;
            if(!map) {
                map = L.map('map', {zoomControl: false}).setView([16.8892, 42.5511], 13);
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
            }
        }

        function confirmOrder() {
            alert("ØªÙ… Ø®ØµÙ… Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ† ÙˆØ¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ø£Ù‚Ø±Ø¨ ÙƒØ§Ø¨ØªÙ†.. Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙÙˆØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„.");
        }
    </script>
</body>
</html>
