<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LOKA PRO">
    <link rel="apple-touch-icon" href="https://ui-avatars.com/api/?name=L&background=1a73e8&color=fff&size=512">

    <title>LOKA PRO</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #1a73e8; --dark: #0a0a0a; --card: #1c1c1e; }
        body { 
            margin: 0; 
            font-family: -apple-system, system-ui, sans-serif; 
            background: var(--dark); 
            color: white; 
            overflow: hidden;
            height: 100vh;
            overscroll-behavior-y: contain; /* Ù…Ù†Ø¹ Ø³Ø­Ø¨ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø£Ø³ÙÙ„ */
        }
        
        /* Ù…Ø±Ø§Ø¹Ø§Ø© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø§Ø¹Ø© ÙˆØ§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙŠ Ø§Ù„Ø£ÙŠÙÙˆÙ† */
        .main-header { padding: env(safe-area-inset-top) 20px 20px; text-align: center; }
        .logo { font-size: 35px; font-weight: bold; color: var(--primary); margin-top: 10px; }
        .logo span { background: var(--primary); color: white; padding: 2px 8px; border-radius: 5px; font-size: 14px; }
        
        .main-menu { display: grid; gap: 15px; padding: 20px; }
        .menu-item { background: var(--card); padding: 25px; border-radius: 20px; display: flex; align-items: center; gap: 15px; font-size: 20px; border: 1px solid #333; transition: 0.3s; }
        .menu-item:active { background: #2c2c2e; transform: scale(0.98); }

        #map { height: 100vh; width: 100%; }
        .status-card { position: absolute; bottom: calc(30px + env(safe-area-inset-bottom)); left: 15px; right: 15px; background: var(--card); padding: 20px; border-radius: 20px; z-index: 1000; border: 1px solid #333; }
        
        .screen { height: 100vh; width: 100vw; transition: 0.5s ease; position: absolute; top:0; left:0; }
        .hidden { transform: translateX(100%); opacity: 0; }
        
        .btn-cancel { width: 100%; background: none; border: none; color: #ff3b30; margin-top: 15px; font-size: 16px; }
    </style>
</head>
<body>

    <div id="home" class="screen">
        <div class="main-header">
            <div class="logo">LOKA <span>PRO</span></div>
            <p style="color: #888;">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø·Ø­Ø§Øª ÙˆØ§Ù„Ù†Ù‚Ù„ ÙÙŠ Ø¬Ø§Ø²Ø§Ù†</p>
        </div>
        <div class="main-menu">
            <div class="menu-item" onclick="goToMap('Ø³Ø·Ø­Ø©')">ğŸï¸ <span>Ø£Ù‚Ø±Ø¨ Ø³Ø·Ø­Ø©</span></div>
            <div class="menu-item" onclick="goToMap('ØªØ±ÙŠÙ„Ø©')">ğŸš› <span>Ø£Ù‚Ø±Ø¨ ØªØ±ÙŠÙ„Ø©</span></div>
            <div class="menu-item" onclick="goToMap('Ø¯ÙŠÙ†Ø§')">ğŸšš <span>Ù†Ù‚Ù„ Ø¹ÙØ´</span></div>
        </div>
    </div>

    <div id="map-screen" class="screen hidden">
        <div id="map"></div>
        <div class="status-card">
            <div id="searching" style="display: flex; align-items: center; gap: 10px;">
                <div style="width:10px; height:10px; background:var(--primary); border-radius:50%; animation: pulse 1s infinite;"></div>
                <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒØ§Ø¨ØªÙ† ÙÙŠ Ø¬Ø§Ø²Ø§Ù†...</span>
            </div>
            <button class="btn-cancel" onclick="location.reload()">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        function goToMap(type) {
            document.getElementById('home').classList.add('hidden');
            document.getElementById('map-screen').classList.remove('hidden');
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¹Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¬Ø§Ø²Ø§Ù†
            let map = L.map('map', {zoomControl: false}).setView([16.8892, 42.5511], 13);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø±ÙƒØ± ÙˆÙ‡Ù…ÙŠ Ù„Ù„ÙƒØ§Ø¨ØªÙ† Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                L.marker([16.8950, 42.5600]).addTo(map).bindPopup("Ø§Ù„ÙƒØ§Ø¨ØªÙ† Ù‚Ø§Ø¯Ù… Ø¥Ù„ÙŠÙƒ").openPopup();
                document.getElementById('searching').innerHTML = "âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙƒØ§Ø¨ØªÙ† Ù‚Ø±ÙŠØ¨!";
            }, 3000);
        }
    </script>
    <style>
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</body>
</html>
